### 3.1.3. 문자열 함수

3.1.3.1. concat 함수

여러 개의 문자열을 결합하여 하나의 문자열로 만듭니다. 문자열이 아닌 표현식의 경우 문자열로 변환 후 결합됩니다.

\| 문법 \|

~~~~
	concat(표현식1, 표현식2, …)
~~~~

\| 사용 예 \|

1) hello와 world 문자열 결합

~~~
	concat("hello", "world") => "helloworld"
~~~

2) a와 b와 c 문자열 결합 (3개 이상 가능)

~~~
	concat("a", "b", "c") => "abc"
~~~

3.1.3.2. guid 함수

항상 유일한 GUID 문자열 값을 생성하여 반환합니다. (araqne-logdb 1.7.5 버전부터 지원)

\| 문법 \|

~~~~
	guid()
~~~~

\| 사용 예 \|

* guid() => "a1189dda-870e-4aea-8742-76dcb8398b49″


3.1.3.3. kvjoin 함수

모든 key와 value를 결합하여 하나의 문자열을 만듭니다. 구분문자를 지정하여 값들을 구분 할 수 있으며, 정규표현식을 이용하여 key를 필터링 할 수 있습니다.

\| 문법 \|

* kvjoin(표현식1,표현식2[,정규표현식])

	\* 표현식1: key와 value를 구분하는 문자
    
	\* 표현식2: key-value pair들을 구분하는 문자
    
	\* 정규표현식: key가 정규표현식과 일치하는 경우만 결합, 미지정시 모든 값 결합

\| 사용 예 \|

~~~~
	kvjoin("=", "^^") => {key(0)}={value(0)}^^{key(1)}={value(1)}^^..{key(last)}={value(last)}
	
	json "{'src':'10.0.0.1', 'srd':'10.0.0.2', 'dst':'10.0.0.10'}" | eval x = kvjoin(":", "^^")
	 => {dst=10.0.0.10, src=10.0.0.1, x=srd:10.0.0.2^^src:10.0.0.1^^dst:10.0.0.10}

	json "{'src':'10.0.0.1','srd':'10.0.0.2', 'dst':'10.0.0.10'}" | eval x = kvjoin(":", "^^","sr.*")
	 => {dst=10.0.0.10, src=10.0.0.1, srd=10.0.0.2, x=srd:10.0.0.2^^src:10.0.0.1}
~~~~

3.1.3.4. left 함수

왼쪽 부분문자열을 반환합니다. 지정된 길이보다 문자열의 길이가 짧은 경우 문자열 전체가 반환됩니다. 문자열이 이외의 타입이 들어온 경우 문자열로 자동 변환 후 부분문자열 반환을 수행합니다.

\| 문법 \|

~~~~
	left(표현식, 길이)
~~~~


표현식은 원본 문자열을 나타냅니다. 길이는 0 이상의 상수만 허용되며 왼쪽에서 몇 개의 문자를 잘라서 반환할지 지정합니다.

\| 사용 예 \|

~~~~
	left("0123456789", 4) => "0123"
	left("0123456789", 11) => "0123456789"
	left("0123456789", 0) => ""
	left(1234, 2) => "12"
	left(1.23, 3) => "1.2"
	left(null, 3) => null
~~~~

3.1.3.5. len 함수

문자열의 길이를 반환합니다. 표현식이 null인 경우 0을 반환합니다. 주어진 표현식이 문자열이 아닌 경우, 문자열로 변환된 후의 문자열 길이를 반환합니다.

\| 문법 \|

~~~~
	len(표현식)
~~~~

\| 사용 예 \|

~~~~
	len("sample") => 6
	len(null) => 0
	len(123) => 3
	len(1.2) => 3
~~~~

3.1.3.6. lower 함수

문자열을 소문자로 변환합니다. 표현식이 null인 경우 null을 반환합니다. 문자열 이외의 타입이 들어오는 경우 문자열로 자동 변환 후 소문자 변환을 수행합니다.

\| 문법 \|

~~~~
	lower(표현식)
~~~~

\| 사용 예 \|

~~~~
	lower("Hello World") => "hello world"
	lower(1234) => "1234"
	lower(null) => null
~~~~

3.1.3.7. right 함수

오른쪽 부분문자열을 반환합니다. 지정된 길이보다 문자열의 길이가 짧은 경우 문자열 전체가 반환됩니다. 문자열이 이외의 타입이 들어온 경우 문자열로 자동 변환 후 부분문자열 반환을 수행합니다.

\| 문법 \|

~~~~
	right(표현식, 길이)
~~~~


표현식은 원본 문자열을 나타냅니다. 길이는 0 이상의 상수만 허용되며 오른쪽에서 몇 개의 문자를 잘라서 반환할지 지정합니다.

\| 사용 예 \|

~~~~
	right("0123456789", 4) => "6789"
	right("0123456789", 11) => "0123456789"
	right("0123456789", 0) => ""
	right(1234, 2) => "34"
	right(1.23, 3) => ".23"
	right(null, 3) => null
~~~~

3.1.3.8. strjoin 함수

주어진 배열을 지정된 구분자로 구분된 하나의 문자열로 병합합니다. 표현식이 null인 경우 null을 반환합니다.

(araqne-logdb 2.2.14 버전부터 지원)

\| 문법 \|

~~~~
	strjoin(구분자, 배열)
~~~~

 * 구분자: 문자열 상수. 배열 병합 시 구분자로 사용됩니다.
 * 배열: 하나의 문자열을 생성하는데 사용할 데이터 원본.

구분자에 상수가 아닌 표현식이 들어오면 문법 오류가 발생합니다. 배열이 null인 경우 null을 반환합니다. 배열의 요소가 null인 경우 병합된 문자열에도 null이 표시됩니다.

\| 사용 예 \|

~~~~
	strjoin(",", null) => null
    strjoin(",", array(1, 2, 3)) => "1,2,3"
~~~~

3.1.3.9. substr 함수

원본 문자열에서 지정된 위치의 부분문자열을 반환합니다. 표현식이 null인 경우 null을 반환합니다. 시작 위치가 문자열 길이보다 큰 경우 null을 반환합니다. 끝 위치가 문자열 길이보다 큰 경우 시작 위치부터 문자열 끝까지 반환합니다. 표현식이 문자열 타입이 아닌 경우 문자열로 자동 변환 후 부분 문자열을 반환합니다.

\| 문법 \|

~~~~
	substr(표현식, 시작위치, 끝위치)
~~~~

 * 시작 위치: 0 이상의 상수
 * 끝 위치: 시작 위치보다 같거나 큰 0 이상의 상수

\| 사용 예 \|

~~~~
	substr("0123456789", 0, 3) => "012"
	substr("0123456789", 2, 4) => "23"
	substr("0123456789", 4, 12) => "456789"
	substr("0123456789", 5, 5) => ""
	substr("0123456789", 10, 11) => null
	substr(null, 0, 3) => null
~~~~

3.1.3.10. trim 함수

문자열의 좌우에서 공백 문자(탭, 개행 포함)를 제거합니다. 주어진 표현식이 null인 경우 null을 반환합니다. 주어진 표현식이 문자열이 아닌 경우, 자동으로 문자열 변환한 뒤에 공백을 제거한 문자열을 반환합니다.

\| 문법 \|

~~~~
	trim(표현식)
~~~~

\| 사용 예 \|

~~~~
	trim(" hello world ") => "hello world"
	trim(123) => "123"
	trim(null) => null
~~~~

3.1.3.11. upper 함수

문자열을 대문자로 변환합니다. 표현식이 null인 경우 null을 반환합니다. 문자열 이외의 타입이 들어오는 경우 문자열로 자동 변환 후 대문자 변환을 수행합니다.

\| 문법 \|

~~~~
	upper(표현식)
~~~~

\| 사용 예 \|

~~~~
	upper("Hello World") => "HELLO WORLD"
	upper(1234) => "1234"
	upper(null) => null
~~~~

3.1.3.12. urldecode 함수

주어진 URL을 디코드하여 반환합니다.

\| 문법 \|

~~~~
	urldecode(표현식1 [, 문자 인코딩 ])
~~~~

 * 표현식1: 대상 URL
 * 문자 인코딩: 설정하지 않은 경우 UTF-8로 자동 설정

\| 사용 예 \|

~~~~
	urldecode(null) => null
	urldecode("%B7%CE%B1%D7%BA%D0%BC%AE", "EUC-KR") => 로그분석
	urldecode("%EB%A1%9C%EA%B7%B8%EB%B6%84%EC%84%9D") => 로그분석
~~~~
