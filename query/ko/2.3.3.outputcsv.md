### 2.3.3. outputcsv 쿼리 커맨드

지정된 파일시스템 경로에 주어진 필드 값들을 CSV 포맷으로 기록합니다.

\| 문법 \|

~~~~
	outputcsv [overwrite=true] [bom=t] [tab=t] [encoding=인코딩] [tmp=파일경로] [partition=t] 파일경로 출력필드1 [, 출력필드2, ...]
~~~~

 * 덮어쓰기: overwrite 옵션을 true로 설정 시 이미 파일이 있더라도 덮어씁니다. 미설정 시 파일이 존재하면 쿼리가 실패합니다.
 * BOM: true 혹은 t로 설정 시 바이트 오더 마크를 추가합니다. 미설정 시 BOM을 추가하지 않습니다
 * 탭구분자: tab 옵션을 true 혹은 t로 설정 시 쉼표 대신 탭 문자를 구분자로 사용합니다. (araqne-logdb 2.2.1부터 지원)
 * 인코딩: 파일 인코딩을 지정합니다. 미설정 시 기본값은 utf-8입니다.
 * 임시 파일경로: 임시 파일경로를 설정할 경우 파일을 해당 경로에 임시로 작성한 후 쿼리가 종료되면 입력된 파일경로로 이동시킵니다.
 * 시간 기반 파티션: 파티션 옵션을 설정할 경우 파일 경로에 시간 기반으로 입력된 매크로를 기준으로 디렉토리를 설정할 수 있습니다.
   - logtime: 로그 시간을 기준
   - now: 현재 시간을 기준
   - 파티션 옵션을 지정할 경우 매크로를 사용하지 않으면 쿼리가 실패합니다.
 * 파일경로: 상대 경로 혹은 절대 경로로 입력할 수 있습니다.
 * 출력필드: 1개 이상의 출력 필드를 입력해야 합니다.

\| 사용 예 \|

1) ippair.csv 파일로 src_ip와 dst_ip를 기록

~~~
	outputcsv ippair.csv src_ip, dst_ip
~~~

참고) Logpresso 는 비정형 데이터 처리가 가능하여 row 마다 필드(컬럼) 구성이 다를 수 있지만, CSV 포맷은 그 특성상 모든 row 에 필드 구성이 동일해야 한다는 제약이 있습니다. 따라서 Logpresso의 outputcsv 명령을 사용할 때는 불편하더라도 출력필드를 반드시 사용자가 규정해줘야 합니다. 대신, 출력필드 지정 없이 데이터를 파일에 기록하고 싶을 때는 outputjson 명령을 참고해주세요.

2) 디렉토리를 로그 시간을 기준으로 년월일로, 파일이름을 현재시간 기준으로 시분으로 src_ip와 dst_ip를 기록

~~~
	outputcsv partition=t {logtime:/yyyy/MM/dd/}{now:HHmm.csv} src_ip, dst_ip
~~~

